<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>Dashboard - SB Admin</title>
  <link href="/css/styles.css" rel="stylesheet" />
  <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
  <style>
    body {
      margin-top: 20px;
      background-color: #fff; /* White background */
    }

    .card {
      margin-bottom: 20px;
      border: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      perspective: 1000px;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 300px;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      background-color: #92c020;
    }

    .card:hover .card-inner {
      transform: rotateY(180deg);

    }

    .card-front,
    .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
    }

    .card-back {
      background-color: #f8f9fa;
      transform: rotateY(180deg);
    }

    .card-body {
      padding: 1.25rem;
      text-align: center;
    }

    .main-image {
      width: 100%;
      height: 200px; /* Adjust height for consistency */
      object-fit: cover;
      border-radius: 0.25rem 0.25rem 0 0;
    }

    .header-buttons {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 20px;
      align-items: center; /* Align items vertically */
    }

    .header-buttons a {
      margin: 0 5px;
      position: relative;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .header-buttons a:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .search-container {
      margin-bottom: 20px;
      text-align: center;
    }

    .search-input {
      width: 50%;
      padding: 10px;
      border-radius: 50px;
      border: 1px solid #92c020;
      font-size: 16px;
      box-sizing: border-box;
    }

    .heart-icon {
      font-size: 24px;
      color: #dc3545;
      cursor: pointer;
      transition: transform 0.2s, color 0.2s;
    }

    .heart-icon:hover {
      color: #ff6b81;
      transform: scale(1.2);
    }

    .heart-icon.clicked {
      animation: heartbeat 0.6s infinite alternate;
    }

    @keyframes heartbeat {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.2);
      }

      100% {
        transform: scale(1);
      }
    }

    /* Styles for View Details Button */
    .btn-info {
      color: white;
      background-color: #17a2b8;
      border-color: #17a2b8;
    }

    .btn-info:hover {
      color: black;
      background-color: white;
      border-color: black;
    }

    /* Add.ejs Background and Header Styles */
    .add-page-header {
      background-color: #92c020; /* Green header */
      color: white;
      padding: 15px;
      text-align: center;
    }

    .add-page-background {
      background-color: white; /* White background for the page */
      padding: 20px;
    }
  </style>
</head>

<body class="sb-nav-fixed">
<!-- Search Container -->
<div class="search-container">
  <label for="searchInput"></label>
  <input type="text" id="searchInput" class="search-input" placeholder="Search projects...">
</div>

<div id="layoutSidenav">
  <div id="layoutSidenav_nav">
    <nav class="sb-sidenav accordion sb-sidenav-light" style="background-color:#92c020 " id="sidenavAccordion">
      <div class="sb-sidenav-menu">
        <div class="nav">
          <!-- Navbar Brand -->
          <a class="navbar-brand" href="#">
            <br>
          </a>
          <a href="/auth/logout" class="btn btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
          <br>
          <a style="margin-left: 45px" href="/books/add" class="nav-link">Add Project</a>
        </div>
      </div>
      <div class="sb-sidenav-footer">
        <div class="small">Logged in as: <%= projects.name %></div> <!-- Display user ID -->
      </div>
    </nav>
  </div>

  <div id="layoutSidenav_content">
    <main class="project-wrapper">
      <div class="container-fluid px-4">
        <h1 id="text" style="text-align: center" class="mt-4">Projects</h1>
        <ol class="breadcrumb mb-4">
        </ol>
        <div class="header-buttons">
          <a id="adds" href="/books/add" class="btn btn-success"><i class="fas fa-plus"></i> Add Project</a>
        </div>

        <div class="project-wrapper">
          <div class="container-fluid px-4">
            <div class="row" id="projectContainer">
              <% projects.forEach(function(project) { %>
                <div class="col-md-4">
                  <div class="card">
                    <div class="card-inner">
                      <div class="card-front">
                        <% if (project.image_url) { %>
                          <img class="card-img-top main-image" src="<%= project.image_url %>" alt="<%= project.name %>">
                        <% } %>
                        <div class="card-body">
                          <h5 class="card-title"><%= project.name %></h5>
                          <p class="card-text"><%= project.description %></p>
                          <a href="/books/details/<%= project.id %>" id="views" class="btn btn-info btn-block"><i class="fas fa-info-circle"></i> View Details</a>
                        </div>
                      </div>
                      <div class="card-back">
                        <div class="card-body">
                          <h5 class="card-title">More Details</h5>
                          <p class="card-text">Additional details about the project can go here.</p>
                          <a href="/books/details/<%= project.id %>" id="views" class="btn btn-info btn-block"><i class="fas fa-info-circle"></i> View Details</a>
                          <i class="fas fa-heart heart-icon" onclick="toggleHeart(this)"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<script>
  // Wait for the document to load
  document.addEventListener('DOMContentLoaded', function () {
    // Get the input element and project container
    const searchInput = document.getElementById('searchInput');
    const projectContainer = document.getElementById('projectContainer');

    // Listen for input changes in the search input
    searchInput.addEventListener('input', function () {
      const searchValue = searchInput.value.toLowerCase().trim();

      // Get all project cards
      const projects = projectContainer.getElementsByClassName('col-md-4');

      // Loop through each project card and hide/show based on search value
      Array.from(projects).forEach(function (project) {
        const projectName = project.querySelector('.card-title').textContent.toLowerCase();

        // Check if project name includes the search value
        if (projectName.includes(searchValue)) {
          project.style.display = 'block'; // Show the project card
        } else {
          project.style.display = 'none'; // Hide the project card
        }
      });
    });
  });

  // Toggle heart icon animation
  function toggleHeart(icon) {
    icon.classList.toggle('clicked');
  }
</script>